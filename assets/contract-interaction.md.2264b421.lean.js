import{d as a}from"./chunks/index.921360e7.js";import{o as k,a as x,r as d,b as o,c as l,d as n,t as C,e as D,f as F}from"./app.76e0960b.js";const I=F("",26),P={class:"demo"},S={key:0},B=F("",4),N={class:"demo"},O={key:0},R=F("",4),V={class:"demo"},q={key:0,target:"_blank",href:"https://github.com/tonlabs/ton-labs-contracts/blob/e7821cec3514869979f702047348b2faf35b7b3f/solidity/depool/DePool.sol#L1428"},M=n("pre",null,"require(optParticipant.hasValue(), Errors.NO_SUCH_PARTICIPANT);",-1),j=[M],W={key:1},J=F("",4),K=JSON.parse('{"title":"Contract Interaction","description":"","frontmatter":{},"headers":[{"level":2,"title":"Contract ABI","slug":"contract-abi"},{"level":3,"title":"Components","slug":"components"},{"level":3,"title":"Declaration","slug":"declaration"},{"level":2,"title":"Contract Wrapper","slug":"contract-wrapper"},{"level":2,"title":"Reading contract","slug":"reading-contract"},{"level":3,"title":"Simple getters","slug":"simple-getters"},{"level":3,"title":"Responsible methods","slug":"responsible-methods"},{"level":3,"title":"TVM Exceptions","slug":"tvm-exceptions"},{"level":3,"title":"Basic exceptions","slug":"basic-exceptions"},{"level":3,"title":"Solidity exceptions","slug":"solidity-exceptions"},{"level":2,"title":"Sending messages","slug":"sending-messages"}],"relativePath":"contract-interaction.md","lastUpdated":1669741002000}'),z={name:"contract-interaction.md"},G=Object.assign(z,{setup(H){const e=new a.ProviderRpcClient,u={"ABI version":2,header:["time","expire"],functions:[{name:"addOrdinaryStake",inputs:[{name:"stake",type:"uint64"}],outputs:[]},{name:"getDePoolInfo",inputs:[],outputs:[{name:"poolClosed",type:"bool"},{name:"minStake",type:"uint64"},{name:"validatorAssurance",type:"uint64"},{name:"participantRewardFraction",type:"uint8"},{name:"validatorRewardFraction",type:"uint8"},{name:"balanceThreshold",type:"uint64"},{name:"validatorWallet",type:"address"},{name:"proxies",type:"address[]"},{name:"stakeFee",type:"uint64"},{name:"retOrReinvFee",type:"uint64"},{name:"proxyFee",type:"uint64"}]},{name:"getParticipantInfo",inputs:[{name:"addr",type:"address"}],outputs:[{name:"total",type:"uint64"},{name:"withdrawValue",type:"uint64"},{name:"reinvest",type:"bool"},{name:"reward",type:"uint64"},{name:"stakes",type:"map(uint64,uint64)"},{name:"vestings",type:"map(uint64,tuple)",components:[{name:"remainingAmount",type:"uint64"},{name:"lastWithdrawalTime",type:"uint64"},{name:"withdrawalPeriod",type:"uint32"},{name:"withdrawalValue",type:"uint64"},{name:"owner",type:"address"}]},{name:"locks",type:"map(uint64,tuple)",components:[{name:"remainingAmount",type:"uint64"},{name:"lastWithdrawalTime",type:"uint64"},{name:"withdrawalPeriod",type:"uint32"},{name:"withdrawalValue",type:"uint64"},{name:"owner",type:"address"}]},{name:"vestingDonor",type:"address"},{name:"lockDonor",type:"address"}]}],data:[],events:[]};let p;k(async()=>{p=await e.subscribe("permissionsChanged"),p.on("data",s=>{s.permissions.accountInteraction!=null&&(s.permissions.accountInteraction.address=s.permissions.accountInteraction.address.toString())})}),x(async()=>{p!=null&&p.unsubscribe()});const t=async()=>{await e.requestPermissions({permissions:["basic","accountInteraction"]})},h=new a.Address("0:bbcbf7eb4b6f1203ba2d4ff5375de30a5408a8130bf79f870efbcfd49ec164e9"),y=new e.Contract(u,h),r=d(),m=async()=>{await t(),r.value=await y.methods.getDePoolInfo({}).call().then(s=>(s!=null&&(s.validatorWallet=s.validatorWallet.toString(),s.proxies.forEach((A,T,_)=>{_[T]=A.toString()})),JSON.stringify(s,void 0,4)))},b=async()=>{await t(),r.value=await y.methods.getParticipantInfo({addr:new a.Address("0:dd30aeb6c7ff71d0953d7c3f00d3f7487405ef5f6ee0b2bfa2cb5a73f6fe690a")}).call().then(s=>(s!=null&&(s.vestingDonor=s.vestingDonor.toString(),s.lockDonor=s.lockDonor.toString()),JSON.stringify(s,void 0,4)))},c=d(),g=async()=>{await t();try{await y.methods.getParticipantInfo({addr:new a.Address("0:0000000000000000000000000000000000000000000000000000000000000000")}).call()}catch(s){s instanceof a.TvmException&&(c.value=s.code)}},f={"ABI version":2,version:"2.2",header:["pubkey","time","expire"],functions:[{name:"name",inputs:[{name:"answerId",type:"uint32"}],outputs:[{name:"value0",type:"string"}]}],events:[],data:[]},v=new a.Address("0:a519f99bb5d6d51ef958ed24d337ad75a1c770885dcd42d51d6663f9fcdacfb2"),w=new e.Contract(f,v),i=d(),E=async()=>{await t();const{value0:s}=await w.methods.name({answerId:0}).call({responsible:!0});i.value=s};return(s,A)=>(o(),l("div",null,[I,n("div",P,[n("button",{onClick:m},"getDePoolInfo"),n("button",{onClick:b},"getParticipantInfo"),r.value!=null?(o(),l("pre",S,C(r.value),1)):D("",!0)]),B,n("div",N,[n("button",{onClick:E},"Get token name"),i.value!=null?(o(),l("pre",O,"Token name: "+C(i.value),1)):D("",!0)]),R,n("div",V,[n("button",{onClick:g},"getParticipantInfo"),c.value!=null?(o(),l("a",q,j)):D("",!0),c.value!=null?(o(),l("pre",W,"TVM Exception: "+C(c.value),1)):D("",!0)]),J]))}});export{K as __pageData,G as default};
